---
import type { CollectionEntry } from "astro:content";
import { SITE } from "../consts";

interface Props {
  post: CollectionEntry<"blog">;
}

const { post } = Astro.props;

const postURL = `/posts/${post.id}/`;
const formattedDate = new Intl.DateTimeFormat(SITE.lang, {
  dateStyle: "medium",
  timeZone: SITE.timezone,
}).format(post.data.pubDatetime);
---

<article class="rounded-lg border border-border bg-muted/20 p-5 transition-colors hover:border-accent/70">
  <h3 class="text-xl leading-tight">
    <a href={postURL} class="font-bold text-accent transition-colors hover:text-accent/80">{post.data.title}</a>
  </h3>

  <p class="mt-2 text-sm text-foreground/80">{post.data.description}</p>

  <div class="mt-4 flex flex-wrap items-center gap-3 text-xs text-foreground/65">
    <time class="text-accent/70" datetime={post.data.pubDatetime.toISOString()}>{formattedDate}</time>

    {
      post.data.tags.length > 0 && (
        <ul class="flex flex-wrap gap-2">
          {post.data.tags.map((tag) => <li class="rounded border border-border px-2 py-1">#{tag}</li>)}
        </ul>
      )
    }
  </div>
</article>
